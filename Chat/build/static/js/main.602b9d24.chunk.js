(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{46:function(e,t,c){},47:function(e,t,c){},52:function(e,t,c){"use strict";c.r(t);var n=c(9),a=c.n(n),r=c(38),s=c.n(r),i=(c(46),c(0)),o=c(1),j=c(16),l=(c(47),c(26)),u=(c(53),c(49),c(39)),b=c(40),d=c(13);l.a.initializeApp({apiKey:"AIzaSyAojgkXmozM_HnCLV0hq1_BRZBO0HYpq-M",authDomain:"chat-ae62a.firebaseapp.com",projectId:"chat-ae62a",storageBucket:"chat-ae62a.appspot.com",messagingSenderId:"58043589802",appId:"1:58043589802:web:627be3274f7e5b676c5cd3"}),l.a.auth().useDeviceLanguage();var h=l.a.auth(),p=l.a.firestore();function O(){var e=Object(n.useState)(""),t=Object(j.a)(e,2),c=t[0],a=t[1];return Object(d.jsxs)(d.Fragment,{children:[Object(d.jsxs)("div",{className:"google-box",children:[Object(d.jsxs)("div",{className:"google-btn",onClick:function(){var e=new l.a.auth.GoogleAuthProvider;h.signInWithPopup(e)},children:[Object(d.jsx)("div",{className:"google-icon-wrapper",children:Object(d.jsx)("img",{className:"google-icon",src:"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg",alt:"logo"})}),Object(d.jsx)("div",{className:"btn-text",children:Object(d.jsx)("b",{children:"\u0423\u0432\u0456\u0439\u0442\u0438 \u0437\u0430 \u0434\u043e\u043f\u043e\u043c\u043e\u0433\u043e\u044e Google"})})]}),Object(d.jsx)("br",{}),Object(d.jsx)("div",{className:"container",children:Object(d.jsx)("div",{id:"recaptcha-container"})})]}),Object(d.jsxs)("div",{className:"flex-box",children:[Object(d.jsx)("input",{className:"phone-holder",placeholder:"\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043d\u043e\u043c\u0435\u0440 \u0442\u0435\u043b\u0435\u0444\u043e\u043d\u0443",type:"phone",value:c,onChange:function(e){a(e.target.value)}}),Object(d.jsx)("button",{id:"phone",type:"button",onClick:function(){var e=new l.a.auth.RecaptchaVerifier("recaptcha-container",{size:"invisible"});h.signInWithPhoneNumber(c,e).then((function(e){var t=prompt("\u0412\u0432\u0435\u0434\u0456\u0442\u044c \u043a\u043e\u0434 \u0437 \u0421\u041c\u0421","");null!==t&&e.confirm(t).then((function(e){console.log(e.user),document.querySelector("label").textContent+=e.user.phone+"\u041d\u043e\u043c\u0435\u0440 \u043f\u0456\u0434\u0442\u0432\u0435\u0440\u0434\u0436\u0435\u043d\u043e"})).catch((function(e){console.error(e)}))})).catch((function(e){console.error(e)}))},children:"\u0423\u0432\u0456\u0439\u0442\u0438 \u0437\u0430 \u0434\u043e\u043f\u043e\u043c\u043e\u0433\u043e\u044e \u0421\u041c\u0421"}),Object(d.jsx)("label",{})]})]})}var m=function(){return h.currentUser&&Object(d.jsx)("button",{type:"button",onClick:function(){return h.signOut()},children:"\u0412\u0438\u0445\u0456\u0434"})};function x(){var e=Object(n.useState)(""),t=Object(j.a)(e,2),c=t[0],a=t[1],r=Object(n.useRef)(),s=p.collection("messages"),u=s.orderBy("createdAt").limitToLast(25),O=Object(b.a)(u,{idField:"id"}),m=Object(j.a)(O,1)[0],x=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t){var n,r,o,j;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=h.currentUser,r=n.uid,o=n.photoURL,j=o||"https://bit.ly/348yGrm",e.next=5,s.add({text:c,createdAt:l.a.firestore.FieldValue.serverTimestamp(),uid:r,avatarPhoto:j});case 5:a("");case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){r.current.scrollIntoView({behavior:"smooth"})}),[m]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)("div",{className:"text-field",children:m&&m.map((function(e){return Object(d.jsx)(v,{message:e},e.id)}))}),Object(d.jsxs)("div",{className:"send-form",children:[Object(d.jsx)("span",{ref:r}),Object(d.jsxs)("form",{onSubmit:x,children:[Object(d.jsx)("input",{value:c,onChange:function(e){return a(e.target.value)},placeholder:"\u041d\u0430\u043f\u0438\u0448\u0456\u0442\u044c \u0449\u043e-\u043d\u0435\u0431\u0443\u0434\u044c"}),Object(d.jsx)("button",{type:"submit",disabled:!c,children:"\ud83d\udce4"})]})]})]})}var v=function(e){var t=e.message,c=t.text,n=t.uid,a=t.avatarPhoto,r=n===h.currentUser.uid?"sent":"received";return Object(d.jsx)(d.Fragment,{children:Object(d.jsxs)("div",{className:"message ".concat(r),children:[Object(d.jsx)("img",{src:a,alt:"avatar"}),Object(d.jsx)("p",{children:c})]})})},f=function(){var e=Object(u.a)(h),t=Object(j.a)(e,1)[0];return Object(d.jsxs)("div",{className:"App",children:[Object(d.jsxs)("header",{children:[Object(d.jsx)("h1",{children:"Web Chat"}),Object(d.jsx)(m,{})]}),Object(d.jsx)("section",{children:t?Object(d.jsx)(x,{}):Object(d.jsx)(O,{})})]})};s.a.render(Object(d.jsx)(a.a.StrictMode,{children:Object(d.jsx)(f,{})}),document.getElementById("root"))}},[[52,1,2]]]);
//# sourceMappingURL=main.602b9d24.chunk.js.map