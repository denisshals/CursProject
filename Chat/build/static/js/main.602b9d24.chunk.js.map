{"version":3,"sources":["App.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","auth","useDeviceLanguage","firestore","SignIn","useState","phone","setPhone","className","onClick","provider","GoogleAuthProvider","signInWithPopup","src","alt","id","placeholder","type","value","onChange","e","target","captcha","RecaptchaVerifier","size","signInWithPhoneNumber","then","code","prompt","confirm","result","console","log","user","document","querySelector","textContent","catch","error","SignOut","currentUser","signOut","ChatRoom","formValue","setFormValue","dummy","useRef","messagesRef","collection","query","orderBy","limitToLast","useCollectionData","idField","messages","sendMessage","preventDefault","uid","photoURL","avatarPhoto","add","text","createdAt","FieldValue","serverTimestamp","useEffect","current","scrollIntoView","behavior","map","message","ref","onSubmit","disabled","ChatMessage","messageClass","App","useAuthState","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.602b9d24.chunk.js","sourcesContent":["import { useEffect, useRef, useState } from 'react';\nimport './App.css';\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/firestore';\nimport 'firebase/compat/auth';\n// —Ö—É–∫–∏ –∏–∑ node-–ø–∞–∫–µ—Ç–∞ firebase\nimport { useAuthState } from 'react-firebase-hooks/auth';\nimport { useCollectionData } from 'react-firebase-hooks/firestore'\n\n\n// –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ—Ñ–∏–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –≤ firebase\nfirebase.initializeApp({\n  apiKey: \"AIzaSyAojgkXmozM_HnCLV0hq1_BRZBO0HYpq-M\",\n  authDomain: \"chat-ae62a.firebaseapp.com\",\n  projectId: \"chat-ae62a\",\n  storageBucket: \"chat-ae62a.appspot.com\",\n  messagingSenderId: \"58043589802\",\n  appId: \"1:58043589802:web:627be3274f7e5b676c5cd3\"\n})\n\nfirebase.auth().useDeviceLanguage();\nconst auth = firebase.auth();\nconst firestore = firebase.firestore();\n\nfunction App() {\n  //–ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ —Å–µ—Ä–≤–∏—Å–µ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å\n  const [user] = useAuthState(auth);\n\n  return (\n    <div className=\"App\">\n      <header >\n        <h1>Web Chat</h1>\n        <SignOut />\n      </header>\n\n      <section>\n        {/* —É—Å–ª–æ–≤–Ω—ã–π —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å */}\n        {user ? <ChatRoom /> : <SignIn />}\n      </section>\n\n    </div>\n  );\n}\n\nfunction SignIn() {\n  const [phone, setPhone] = useState(\"\");\n\n const signInWithPhone = () => {\n   //–î–µ–ª–∞–µ–º –∫–∞–ø—Ç—á—É –Ω–µ–≤–∏–¥–∏–º–æ–π –¥–ª—è —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞(!). –ß—Ç–æ–±—ã —É—Å–∫–æ—Ä–∏—Ç—å —Ä–∞–±–æ—Ç—É. –¢–∞–∫ –∫–∞–∫ —ç—Ç–æ –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–π —ç–ª–µ–º–µ–Ω—Ç –º–µ—Ç–æ–¥–∞ —Å–º—Å-–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –≤ firebase\n  const captcha = new firebase.auth.RecaptchaVerifier(\"recaptcha-container\", {\n    size: \"invisible\",\n  });\n  //–°–∞–º –º–µ—Ç–æ–¥ —Å–º—Å-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏. –ö–æ–¥ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞–Ω –æ—Ç—Å—é–¥–∞ https://firebase.google.com/docs/auth/web/phone-auth\n  auth.signInWithPhoneNumber(phone, captcha)\n    .then((e) => {\n      const code = prompt(\"–í–≤–µ–¥—ñ—Ç—å –∫–æ–¥ –∑ –°–ú–°\", \"\");\n      if (code === null) return;\n//—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ–º –∫–æ–¥ –∏–∑ —Å–º—Å\n      e.confirm(code)\n        .then((result) => {\n          console.log(result.user);\n\n          document.querySelector(\"label\").textContent += result.user.phone + \"–ù–æ–º–µ—Ä –ø—ñ–¥—Ç–≤–µ—Ä–¥–∂–µ–Ω–æ\";\n        })\n        .catch((error) => {\n          console.error(error);\n        });\n    })\n    .catch((error) => {\n      console.error(error);\n    });\n }\n  \n  const signInWithGoogle = () => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    //–ú–µ—Ç–æ–¥ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ —Å –ø–æ–º–æ—â—å—é –≥—É–≥–ª –∞–∫–∫–∞—É–Ω—Ç–∞\n    auth.signInWithPopup(provider);\n  }\n  return (\n    <>\n      <div className=\"google-box\">\n      <div className=\"google-btn\" onClick={signInWithGoogle}>\n          <div className=\"google-icon-wrapper\" >\n            <img className=\"google-icon\" src=\"https://upload.wikimedia.org/wikipedia/commons/5/53/Google_%22G%22_Logo.svg\" alt=\"logo\"/>\n          </div>\n        <div className=\"btn-text\"><b>–£–≤—ñ–π—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é Google</b></div>\n      </div>\n      <br />\n      <div className=\"container\">\n        <div id=\"recaptcha-container\" />\n      </div>\n      </div>\n      <div className=\"flex-box\">\n      <input\n        className=\"phone-holder\"\n        placeholder=\"–í–≤–µ–¥—ñ—Ç—å –Ω–æ–º–µ—Ä —Ç–µ–ª–µ—Ñ–æ–Ω—É\"\n        type=\"phone\"\n        value={phone}\n        onChange={(e) => {\n          setPhone(e.target.value);\n        }}\n      />\n      <button id=\"phone\" type=\"button\" onClick={signInWithPhone}>\n        –£–≤—ñ–π—Ç–∏ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –°–ú–°\n      </button>\n      <label></label>\n      </div>\n    </>\n    \n  )\n\n}\n//–§—É–Ω–∫—Ü–∏—è –≤—ã—Ö–æ–¥–∞. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –º–µ—Ç–æ–¥ —Å–µ—Ä–≤–∏—Å–∞ auth - signOut. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤—É–µ—Ç –ª–∏ –∑–∞–ª–æ–≥–∏–Ω–µ–Ω—ã–π —é–∑–µ—Ä\nconst SignOut = () => {\n  return (\n    auth.currentUser && (\n      <button type=\"button\" onClick={() => auth.signOut()}>\n        –í–∏—Ö—ñ–¥\n      </button>\n    )\n  );\n};\n\nfunction ChatRoom() {\n\n  //–°—Ç–µ–π—Ç –¥–ª—è –≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤–≤–µ–¥–µ–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –µ–≥–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä.\n  const [formValue, setFormValue] = useState(\"\");\n\n  const dummy = useRef();//–ø—Ä–∏–≤—è–∑–∫–∞ –∫ –ø—É—Å—Ç–æ–º—É —Å–ø–∞–Ω—É, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ —É–ø—Ä–∞–≤–ª—è—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–æ–π\n\n  const messagesRef = firestore.collection(\"messages\"); //–ü–æ–¥–≤—è–∑—ã–≤–∞–Ω–∏–µ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ 'messages' –≤ –ë–î firestore\n  const query = messagesRef.orderBy(\"createdAt\").limitToLast(25); \n\n  const [messages] = useCollectionData(query, { idField: \"id\" }); //–•—É–∫ –ø—Ä–æ—Å–ª—É—à–∏–≤–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–ª–ª–µ–∫—Ü–∏–∏ 'messages'. –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞—Å—Å–∏–≤ —Å –æ–±—ä–µ–∫—Ç–∞–º–∏, –≥–¥–µ –∫–∞–∂–¥—ã–π –æ–±—ä–µ–∫—Ç —ç—Ç–æ —Å–æ–æ–±—â–µ–Ω–∏–µ.\n\n  //–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–∞–±–º–∏—Ç–∞. –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –≤–≤–µ–¥–µ–Ω–Ω—ã–π –≤ —Ñ–æ—Ä–º–µ —Ç–µ–∫—Å—Ç –Ω–∞ —Å–µ—Ä–≤–µ—Ä.\n  const sendMessage = async (e) => {\n    e.preventDefault();\n    const { uid, photoURL } = auth.currentUser;\n\n    //–ø—Ä–∏–∫—Ä–µ–ø–ª—è–µ–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ, –∫–∞–∫ –æ–Ω –∑–∞–ª–æ–≥–∏–Ω–∏–ª—Å—è\n    //–ï—Å–ª–∏ —á–µ—Ä–µ–∑ –≥—É–≥–ª-–∞–∫–∫–∞—É–Ω—Ç, —Ç–æ –∞–≤–∞—Ç–∞—Ä–∫–∞ –±–µ—Ä–µ—Ç—Å—è –∏–∑ –Ω–µ–≥–æ, –µ—Å–ª–∏ —á–µ—Ä–µ–∑ —Å–º—Å - —Ç–æ –¥–µ—Ñ–æ–ª—Ç–Ω–∞—è –∫–∞—Ä—Ç–∏–Ω–∫–∞\n    const avatarPhoto = photoURL ? photoURL : \"https://bit.ly/348yGrm\"\n\n    //–º–µ—Ç–æ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏ –≤ –ë–î\n    await messagesRef.add({\n      text: formValue,\n      createdAt: firebase.firestore.FieldValue.serverTimestamp(),//–î–æ–±–∞–≤–ª—è–µ–º —Ç–∞–π–º-—Å—Ç–∞–º–ø –∫ –∫–∞–∂–¥–æ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é –∫–∞–∫ —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∞–π–¥–∏—à–Ω–∏–∫\n      uid,\n      avatarPhoto,\n    });\n\n    setFormValue(\"\");//–æ—á–∏—â–µ–Ω–∏–µ —Ñ–æ—Ä–º—ã –ø–æ—Å–ª–µ –æ—Ç–ø—Ä–∞–≤–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏—è\n  };\n\n  //—Ö—É–∫ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–∫—Ä—É—Ç–∫–∏ —á–∞—Ç–∞ –∫ –ø–æ—Å–ª–µ–¥–Ω–µ–º—É —Å–æ–æ–±—â–µ–Ω–∏—é.\n  useEffect(() => {\n    dummy.current.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages]);\n\n  return (<>\n    <div className=\"text-field\">\n      {messages &&\n        messages.map((message) => (\n          <ChatMessage key={message.id} message={message} />\n        ))}\n      </div>\n      <div className=\"send-form\">\n      <span ref={dummy} />\n      <form onSubmit={sendMessage}>\n        <input\n          value={formValue}\n          onChange={(e) => setFormValue(e.target.value)}\n          placeholder=\"–ù–∞–ø–∏—à—ñ—Ç—å —â–æ-–Ω–µ–±—É–¥—å\"\n        />\n        <button type=\"submit\" disabled={!formValue}>\n        üì§\n        </button>\n      </form>\n      </div>\n    \n\n  </>)\n}\n\n\n\nconst ChatMessage = ({ message }) => {\n  const { text, uid, avatarPhoto } = message;\n//—É—Å–ª–æ–≤–Ω—ã–π –≤—ã–±–æ—Ä –Ω–∞–∑–≤–∞–Ω–∏—è css-–∫–ª–∞—Å—Å–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–æ–≥–æ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∏–ª–∏ –¥—Ä—É–≥–∏—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤. –ß–∏—Å—Ç–æ –¥–ª—è —Å—Ç–∏–ª–∏–∑–∞—Ü–∏–∏.\n  const messageClass = uid === auth.currentUser.uid ? 'sent' : 'received';\n//—Ä–µ–Ω–¥–µ—Ä —Å–∞–º–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è. –û–±—ä–µ–∫—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –±–µ—Ä–µ—Ç—Å—è –∏–∑ –ø—Ä–æ–ø—Å–æ–≤. \n  return (<>\n    <div className={`message ${messageClass}`}>\n      <img src={avatarPhoto} alt=\"avatar\"/>\n      <p>{text}</p>\n    </div>\n  </>)\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n"],"sourceRoot":""}